# üéÆ RPG Multijoueur 2D en Python

Un jeu de r√¥le multijoueur en temps r√©el d√©velopp√© avec Python et Pygame, offrant une exp√©rience RPG compl√®te avec combat, exploration et progression de personnage.

## üìã Table des mati√®res

- [Fonctionnalit√©s](#-fonctionnalit√©s)
- [Pr√©requis](#-pr√©requis)
- [Installation](#-installation)
- [Lancement du jeu](#-lancement-du-jeu)
- [Contr√¥les](#-contr√¥les)
- [Donjons et Boss](#-donjons-et-boss)
- [Inventaire et Objets](#-inventaire-et-objets)
- [Classes de personnages](#-classes-de-personnages)
- [Syst√®me de jeu](#-syst√®me-de-jeu)
- [Architecture technique](#-architecture-technique)
- [D√©veloppement](#-d√©veloppement)

## ‚ú® Fonctionnalit√©s

### üéØ **Gameplay principal**
- **Multijoueur en temps r√©el** via TCP avec synchronisation stable
- **4 classes de personnages** uniques avec capacit√©s sp√©ciales
- **Grand monde ouvert** de 3200x2400 pixels divis√© en 9 biomes
- **74 monstres** r√©partis par zones avec respawn intelligent
- **Syst√®me de combat** avec attaques normales, critiques et capacit√©s
- **Syst√®me de donjons complet** avec 3 donjons, boss et m√©caniques sp√©ciales

### ÔøΩ **Syst√®me de donjons avanc√©**
- **3 donjons uniques** : Caverne des Gobelins, Temple des Ombres, Antre du Dragon
- **Instances priv√©es** pour chaque groupe (max 4 joueurs par donjon)
- **Boss √©piques** avec capacit√©s sp√©ciales et m√©caniques uniques
- **Progression par niveau** : niveaux 3, 7 et 12 requis
- **Isolation compl√®te** : monstres de donjon ne peuvent pas s'√©chapper
- **Notifications de donjon** avec syst√®me de logs sp√©cialis√©
- **Portails visuels** sur la carte du monde

### üéí **Syst√®me d'inventaire optimis√©**
- **Interface compacte** 400x400px sans chevauchement avec l'UI
- **D√©filement intelligent** : 6 objets visibles max avec navigation fluide
- **Syst√®me de stacks universel** avec limites par raret√©
- **Limites par raret√©** : Common (50), Uncommon (20), Rare (10), Epic (5), Legendary (2)
- **4 types d'objets** : Armes, Armures, Consommables, Accessoires
- **√âquipement automatique** avec recalcul des statistiques
- **5 niveaux de raret√©** avec drops pond√©r√©s et couleurs distinctives
- **Navigation par fl√®ches/molette** pour inventaires volumineux

### üó∫Ô∏è **Exploration et monde**
- **9 biomes distincts** : Plaines, For√™t, Montagnes, D√©sert, C√¥te, Volcan, Glace, Marais, Cristal
- **Mini-carte interactive** avec affichage des zones et portails de donjons
- **Syst√®me de cam√©ra** fluide qui suit le joueur
- **Monstres sp√©cialis√©s** par biome avec stats adapt√©es
- **Portails de donjons** visibles sur la carte avec indicateurs de niveau

### üé® **Interface utilisateur optimis√©e**
- **Interface √©pur√©e** avec logs de combat masquables (touche L)
- **Panneau d'inventaire int√©gr√©** avec stats compl√®tes du joueur
- **Barres HP/Mana visuelles** en bas d'√©cran avec indicateurs color√©s
- **Syst√®me de notifications** pour donjons et √©v√©nements sp√©ciaux
- **Contr√¥les masquables** (touche H) pour un √©cran propre
- **Indicateurs de d√©filement** pour inventaires volumineux

## üîß Pr√©requis

- **Python 3.8+** (test√© avec Python 3.13.2)
- **Pygame 2.0+** (test√© avec Pygame 2.6.1)
- **Environnement virtuel recommand√©** pour l'isolation des d√©pendances

## üì¶ Installation

1. **Cloner le repository**
```bash
git clone https://github.com/MONKKIII/2DPythonProject.git
cd 2DPythonProject
```

2. **Cr√©er un environnement virtuel (recommand√©)**
```bash
python -m venv .venv
# Sur Windows
.venv\Scripts\activate
# Sur Linux/Mac
source .venv/bin/activate
```

3. **Installer les d√©pendances**
```bash
pip install pygame
```

## üöÄ Lancement du jeu

### D√©marrer le serveur
```bash
python server.py
```
Le serveur se lance sur `localhost:12345`

### Lancer le client
```bash
python client.py
```

**Note :** Vous pouvez lancer plusieurs clients pour jouer en multijoueur !

## üéÆ Contr√¥les

| Touche | Action |
|--------|--------|
| **WASD** / **Fl√®ches** | D√©placement |
| **Espace** | Attaquer le monstre le plus proche |
| **Q** | Utiliser la capacit√© sp√©ciale |
| **Clic gauche** | Attaquer monstre / Ramasser objet / Inventaire |
| **Tab** | Ouvrir/fermer le panneau de stats |
| **I** | Ouvrir/fermer l'inventaire (r√©initialise le d√©filement) |
| **Fl√®ches HAUT/BAS** | D√©filer dans l'inventaire |
| **Molette souris** | D√©filer rapidement dans l'inventaire |
| **M** | Afficher/masquer la mini-carte |
| **H** | Afficher/masquer l'aide |
| **L** | Afficher/masquer les logs de combat |
| **P** | Afficher la liste des donjons |
| **E** | Entrer dans un donjon (pr√®s d'un portail) |
| **R** | Quitter le donjon actuel |

## üè∞ Donjons et Boss

### **Caverne des Gobelins** (Niveau 3+)
- **Position** : Centre-gauche de la carte (1600, 1200)
- **Boss** : Roi Gobelin - Invoquer des sbires gobelins
- **Difficult√©** : D√©butant - Parfait pour apprendre les m√©caniques
- **R√©compenses** : √âquipement de base et or

### **Temple des Ombres** (Niveau 7+)
- **Position** : Nord-centre de la carte (800, 400)  
- **Boss** : Ma√Ætre des Ombres - Attaques d'ombre √† distance
- **Difficult√©** : Interm√©diaire - N√©cessite coordination et esquive
- **R√©compenses** : √âquipement magique et objets rares

### **Antre du Dragon** (Niveau 12+)
- **Position** : Sud-est de la carte (2400, 1600)
- **Boss** : Dragon Ancien - Souffle de feu et spawn massif de l√©zards
- **Difficult√©** : Expert - Combat de groupe recommand√©
- **R√©compenses** : √âquipement l√©gendaire et grandes quantit√©s d'or

### **M√©caniques de donjons**
- **Instances priv√©es** : Chaque groupe a son donjon personnel
- **Maximum 4 joueurs** par instance de donjon
- **Boss avec capacit√©s sp√©ciales** : patterns d'attaque uniques
- **Spawn de sbires** : les boss invoquent des alli√©s pendant le combat
- **Notifications contextuelles** : alertes pour √©v√©nements importants
- **Isolation compl√®te** : monstres de donjon ne peuvent pas s'√©chapper
- **R√©compenses bas√©es sur la contribution** : XP et objets pour tous les participants

## üéí Inventaire et Objets

### **Interface d'inventaire optimis√©e**
- **Taille compacte** : 400x400px, ne chevauche plus avec l'UI
- **D√©filement intelligent** : Maximum 6 objets visibles simultan√©ment
- **Navigation fluide** : Fl√®ches HAUT/BAS et molette de souris
- **Indicateur de position** : Affiche "objets X-Y sur Z total"
- **R√©initialisation automatique** : Retour en haut √† chaque ouverture
- **Design √©pur√©** : Interface sans encombrement visuel

### **Syst√®me de stacking avanc√©**
- **Limites par raret√©** : 
  - Common : 50 objets par stack
  - Uncommon : 20 objets par stack  
  - Rare : 10 objets par stack
  - Epic : 5 objets par stack
  - Legendary : 2 objets par stack
- **Auto-groupement** : Objets identiques fusionnent automatiquement
- **V√©rification des limites** : Pr√©vention du d√©passement de stack
- **Indicateurs visuels** : Affichage (quantit√©/maximum) pour chaque stack

### **Types d'objets et interactions**
- **Armes** : Clic pour √©quiper, am√©liore l'attaque
- **Armures** : Clic pour √©quiper, am√©liore la d√©fense  
- **Consommables** : Clic pour utiliser, effets temporaires
- **Accessoires** : Clic pour √©quiper, bonus divers
- **Couleurs de raret√©** : Gris‚ÜíVert‚ÜíBleu‚ÜíViolet‚ÜíOrange
- **Actions contextuelles** : [CLIC: √©quiper/utiliser/d√©s√©quiper]

## ‚öîÔ∏è Classes de personnages

### üõ°Ô∏è **Warrior (Guerrier)**
- **HP** : 120 | **Mana** : 30 | **Critique** : 5%
- **Capacit√©** : ‚ö° **Charge** (20 mana) - +5 ATK pendant 10s
- **Style** : Tank avec haute d√©fense et attaque soutenue

### üßô **Mage**
- **HP** : 80 | **Mana** : 100 | **Critique** : 15%
- **Capacit√©** : üî• **Boule de Feu** (30 mana) - 150% d√©g√¢ts √† distance
- **Style** : Burst damage √©lev√© avec grande r√©serve de mana

### üèπ **Archer**
- **HP** : 90 | **Mana** : 50 | **Critique** : 20%
- **Capacit√©** : üèπ **Tir Multiple** (25 mana) - Touche 3 cibles max
- **Style** : Attaques multiples avec haute chance critique

### üó°Ô∏è **Rogue**
- **HP** : 85 | **Mana** : 40 | **Critique** : 25%
- **Capacit√©** : üë§ **Furtivit√©** (15 mana) - +50% critique pendant 8s
- **Style** : Vitesse et critiques d√©vastateurs

## üåç Syst√®me de jeu

### **Progression**
- **Syst√®me XP** avec level-up automatique
- **Points de comp√©tence** √† distribuer (3 par niveau)
- **6 statistiques** : Attaque, D√©fense, Vitesse, HP, Mana, Critique
- **Respawn** automatique apr√®s K.O. (5 secondes)

### **Combat**
- **D√©g√¢ts calcul√©s** : (Attaque - D√©fense) √ó Multiplicateur critique
- **Logs compacts** avec emojis : ‚öîÔ∏è üõ°Ô∏è ‚ö° üî• üèπ üë§
- **Cooldown des capacit√©s** : 3 secondes
- **R√©g√©n√©ration de mana** : +2 toutes les 2 secondes

### **Syst√®me de donjons**
- **3 donjons progressifs** avec conditions de niveau
- **Instances isol√©es** : chaque groupe a son donjon priv√©
- **Boss uniques** avec capacit√©s sp√©ciales et patterns d'attaque
- **M√©caniques sp√©ciales** : Spawn de sbires, capacit√©s de zone, buffs de boss
- **Nettoyage automatique** : suppression des monstres orphelins
- **Notifications contextuelles** : spawn de boss, capacit√©s utilis√©es, completion

### **Objets et √©conomie**
- **Drop rate** : 30% par monstre tu√©
- **Raret√© pond√©r√©e** : Common 60%, Uncommon 25%, Rare 12%, Epic 2%, Legendary 1%
- **Auto-stack intelligent** avec v√©rification des limites
- **Inventaire avec d√©filement** : navigation fluide pour grands inventaires
- **Syst√®me d'or** int√©gr√© (pr√™t pour √©conomie future)
- **√âquipement contextuel** : clic pour √©quiper/utiliser/d√©s√©quiper

### **Monde et exploration**
- **9 zones th√©matiques** avec monstres sp√©cialis√©s
- **Portails de donjons** : 3 emplacements fixes sur la carte
- **Noms raccourcis** dans les logs (ex: "Slime" au lieu de "Slime_plains_1")
- **Respawn par zone** respectant les types de monstres
- **Coordonn√©es monde** : 3200√ó2400 avec limites de mouvement
- **Syst√®me d'instances** : monde principal et instances de donjons s√©par√©es

## üîß Architecture technique

### **Serveur (`server.py`)**
- **Mod√®le client-serveur** avec threading
- **Communication TCP** via JSON + d√©limiteurs
- **Game loop 30 FPS** avec √©tats synchronis√©s
- **Threading s√©curis√©** avec locks pour donn√©es partag√©es
- **Gestion d'erreurs robuste** avec timeouts et reconnexions
- **Syst√®me d'instances** : gestion s√©par√©e monde/donjons
- **Nettoyage automatique** : suppression p√©riodique des monstres orphelins
- **Isolation des donn√©es** : √©tats de jeu compl√®tement s√©par√©s par instance

### **Client (`client.py`)**
- **Pygame 2.6.1** pour rendu et input
- **Syst√®me de cam√©ra** avec conversion coordonn√©es monde/√©cran
- **Interface modulaire** avec panneaux masquables et d√©filants
- **Gestion d'√©tat** locale avec synchronisation serveur
- **Optimisations d'affichage** (culling, cache)
- **Notifications contextuelles** : donjons, boss, √©v√©nements
- **Navigation d'inventaire** avec d√©filement fluide et indicateurs

### **Structure des donn√©es**
```python
# Classes principales avec dataclasses
@dataclass
class Player:
    # Stats, inventaire, √©quipement, position, instance_id...

@dataclass 
class Monster:
    # HP, attaque, d√©fense, r√©compenses XP, dungeon_instance...

@dataclass
class Item:
    # Type, raret√©, stats, effets, stackable...

@dataclass
class ItemStack:
    # Gestion des quantit√©s et limites

@dataclass
class DungeonInstance:
    # Boss, joueurs, monstres, √©tat de completion...

@dataclass
class Boss:
    # Capacit√©s sp√©ciales, cooldowns, patterns d'attaque...
```

### **Syst√®me d'instances de donjons**
- **Isolation compl√®te** : chaque instance a ses propres monstres et boss
- **Gestion automatique** : cr√©ation/suppression dynamique des instances
- **S√©curisation des donn√©es** : protection contre les fuites entre instances
- **Nettoyage pr√©ventif** : d√©tection et suppression des monstres orphelins
- **Synchronisation** : √©tats de donjons synchronis√©s entre joueurs

## üöß D√©veloppement

### **Fonctionnalit√©s compl√©t√©es**
- ‚úÖ Multijoueur stable avec 4 classes
- ‚úÖ Combat et capacit√©s sp√©ciales  
- ‚úÖ Grand monde avec 9 biomes et 74 monstres
- ‚úÖ Syst√®me d'objets universel avec stacking intelligent
- ‚úÖ Interface optimis√©e avec inventaire d√©filant
- ‚úÖ Logs de combat compacts et masquables
- ‚úÖ **Syst√®me de donjons complet** avec 3 donjons et boss
- ‚úÖ **Instances isol√©es** avec gestion automatique des monstres
- ‚úÖ **Interface d'inventaire optimis√©e** avec d√©filement fluide
- ‚úÖ **M√©caniques de boss** avec capacit√©s sp√©ciales
- ‚úÖ **Notifications contextuelles** pour √©v√©nements de donjons
- ‚úÖ **Nettoyage automatique** pour √©viter les fuites de monstres

### **D√©tails techniques valid√©s**
- ‚úÖ Isolation compl√®te des instances de donjons
- ‚úÖ Syst√®me de d√©filement d'inventaire (6 objets visibles max)
- ‚úÖ Interface compacte 400x400px sans chevauchement
- ‚úÖ Boss avec patterns d'attaque et spawn de sbires
- ‚úÖ Nettoyage p√©riodique des monstres orphelins
- ‚úÖ Tests automatis√©s pour toutes les fonctionnalit√©s critiques

### **Roadmap future**
- üéØ **Combat PvP** entre joueurs
- ÔøΩ **Donjons √©tendus** : plus de niveaux et m√©caniques
- üé® **Sprites et animations** (remplacer les cercles)
- üè™ **NPCs marchands** et √©conomie compl√®te
- üë• **Guildes et chat global**
- üó∫Ô∏è **Qu√™tes et objectifs avec r√©compenses**
- üéµ **Syst√®me audio** : musiques et effets sonores
- üìä **Statistiques avanc√©es** : classements et achievements

### **Am√©liorations r√©centes**
- üÜï **Syst√®me de donjons** : 3 donjons avec boss et m√©caniques uniques
- üÜï **Inventaire optimis√©** : d√©filement intelligent, interface compacte
- üÜï **Isolation d'instances** : monstres de donjons parfaitement contenus
- üÜï **Interface √©pur√©e** : suppression des √©l√©ments encombrants
- üÜï **Navigation avanc√©e** : contr√¥les intuitifs pour inventaires volumineux

### **Contribuer**
1. Fork le projet
2. Cr√©er une branche feature (`git checkout -b feature/AmazingFeature`)
3. Commit (`git commit -m 'Add AmazingFeature'`)
4. Push (`git push origin feature/AmazingFeature`)
5. Ouvrir une Pull Request

## üìä Statistiques du projet

- **Lignes de code** : ~1500 (serveur) + ~1400 (client)
- **Classes d√©finies** : 12+ dataclasses principales
- **Monstres** : 74 r√©partis sur 9 zones + boss de donjons
- **Donjons** : 3 avec m√©caniques uniques et boss √©piques
- **Objets** : 15+ types avec 5 raret√©s et stacking intelligent
- **R√©solution** : 800√ó600 avec monde 3200√ó2400
- **Performance** : 30 FPS stable en multijoueur avec instances
- **Inventaire** : D√©filement optimis√©, max 6 objets visibles
- **Interface** : Design compact 400x400px sans chevauchement
- **Fonctionnalit√©s** : 15+ commandes clavier et interactions souris
- **Tests** : Suite de tests automatis√©s pour isolation et fonctionnalit√©s

## üìÑ Licence

Ce projet est sous licence MIT. Voir le fichier `LICENSE` pour plus de d√©tails.

## üë• Auteurs

- **MONKKIII** - D√©veloppement initial et architecture
- **Communaut√©** - Contributions et suggestions

---

**üéÆ Bon jeu et bonne exploration !**

*Derni√®re mise √† jour : Ao√ªt 2025 - Version avec donjons et inventaire optimis√©*